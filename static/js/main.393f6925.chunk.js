(this["webpackJsonpsense-annot"]=this["webpackJsonpsense-annot"]||[]).push([[0],{174:function(e,t,n){e.exports=n(256)},179:function(e,t,n){},180:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o),i=(n(179),n(33)),s=n(288),l=n(293);function u(e){var t={root:{color:"white",fontSize:"small",textDecoration:"underline"}};return e.user?r.a.createElement(s.a,{horizontal:!0},r.a.createElement("div",null,e.user.name),r.a.createElement("div",{style:{paddingLeft:"10pt"}},r.a.createElement(l.a,{styles:t,onClick:e.logout_fn},"Logout"))):r.a.createElement(s.a,{horizontal:!0},r.a.createElement("div",null,"Not logged in"),r.a.createElement("div",null,r.a.createElement(l.a,{styles:t,onClick:e.login_fn},"Login")))}function m(e){if(null!==e.session){var t=e.session,n=new Date(t.lastActivity).toLocaleString("en-GB");return r.a.createElement(s.a,{id:"session-wrapper"},r.a.createElement("div",{style:{fontSize:"small"}},"Last activity:"),r.a.createElement("div",{style:{fontSize:"small"}},n))}return r.a.createElement(s.a,{id:"session-wrapper"})}var p=n(298),f=n(299);function d(e,t,n){return t.map((function(t){var a=t.assignId,r=(t.lemma,t.items.length),o=0,c=0;if(a in n){var i=function(e,t){return Object.values(e[t].results).reduce((function(e,t){return t.probs.length>0&&(e.nDone+=t.probs[0]>=.8?1:0,e.nAmbig+=t.probs[0]<.8?1:0),e}),{nDone:0,nAmbig:0})}(n,a);o=i.nDone,c=i.nAmbig}return{name:t.assignId,nTotal:r,nDone:o,nAmbig:c,checked:t.assignId===e}}))}var h=n(294),v=n(303);function b(e){return r.a.createElement(h.a,{items:e.items,onRenderCell:g})}function g(e,t){var n={root:{padding:"1px",height:"24pt"},icon:{color:"white"},iconHovered:{color:"white"},rootHovered:{border:"1px solid white",borderRadius:"5px"}};if(e){var a=e.checked?r.a.createElement(v.a,{styles:n,iconProps:{iconName:"MSNVideosSolid"},checked:!1}):r.a.createElement(v.a,{styles:n,iconProps:{iconName:"MSNVideos"},checked:!1});return r.a.createElement(s.a,{horizontal:!0},r.a.createElement(s.a.Item,{align:"center"},a),r.a.createElement(s.a.Item,{grow:1,align:"center"},e.name),r.a.createElement(s.a.Item,{align:"center"},e.nDone,"/",e.nAmbig,"/",e.nTotal))}return null}var E=n(296),w=n(297),x=n(291);function y(e){var t={root:{color:"white",border:"1px solid white",borderRadius:"5px"}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{horizontal:!0,horizontalAlign:"space-evenly"},r.a.createElement(E.a,{styles:t,iconProps:{iconName:"CaretSolidLeft"},title:"Previous Item"}),r.a.createElement(E.a,{styles:t,iconProps:{iconName:"CaretLeft8"},title:"Previous Todo"}),r.a.createElement(E.a,{styles:t,iconProps:{iconName:"CaretRight8"},title:"Next Todo"}),r.a.createElement(E.a,{styles:t,iconProps:{iconName:"CaretSolidRight"},title:"Next Item"})),r.a.createElement(s.a,{horizontal:!0},r.a.createElement(s.a.Item,null,r.a.createElement(w.a,{styles:{root:{color:"white",minWidth:"70px"}}},"Go to Item")),r.a.createElement(s.a.Item,{grow:1},r.a.createElement(x.a,{styles:{root:{width:"100%"}},defaultValue:e.currentItemId}))))}function k(e){e.assignments,e.annotations;var t=e.session;if(null===t)return null;var n=d(t.currentAssignmentId,e.assignments,e.annotations),a=function(e){var t=e.reduce((function(e,t){return e.nDone+=t.nDone,e.nTotal+=t.nTotal,e}),{nDone:0,nTotal:0});return t.nDone/t.nTotal}(n);return r.a.createElement(s.a,{tokens:{childrenGap:10}},r.a.createElement(p.a,{styles:{itemName:{color:"white"}},label:"".concat(Math.round(1e4*a)/100,"% Complete"),percentComplete:a}),r.a.createElement(y,{currentItemId:t.currentItemId}),r.a.createElement(f.a,null),r.a.createElement(b,{items:n}))}var j=function(e){return r.a.createElement("div",{className:"col-3",style:{background:"radial-gradient(circle at bottom left, rgba(0,0,0,1) 0%, rgba(75,75,75,1) 100%)",borderRight:"2px dashed darkblue",color:"white"}},r.a.createElement(s.a,{tokens:{childrenGap:5,padding:10}},r.a.createElement(u,{user:e.user,login_fn:e.login_fn,logout_fn:e.logout_fn}),r.a.createElement(m,{session:e.session}),r.a.createElement(k,{session:e.session,assignments:e.assignments,annotations:e.annotations})))};n(180);function I(e){var t=e.token,n=e.isFocus;return r.a.createElement(s.a,{horizontalAlign:"center"},r.a.createElement("div",{style:{fontSize:"small"}},t[1])," ",r.a.createElement("div",{style:{fontSize:"large"},title:"".concat(t[2],":").concat(t[3]),className:n?"focus-token":""},t[0])," ")}var O=function(e){var t=e.sentence,n=e.itemId;if(void 0===t)return null;var a=-1;try{a=parseInt(n.split(":")[1])}catch(o){}return r.a.createElement("div",{className:"mx-auto mt-5"},r.a.createElement("div",{className:"card-body bg-light p-5 m-3 border border-primary rounded-lg"},r.a.createElement(s.a,{horizontal:!0,tokens:{childrenGap:3}},t.map((function(e,t){var n=a==t;return r.a.createElement(I,{token:e,isFocus:n})})))))},S=n(12),C=n.n(S),N=n(20),z=n(38);n(124);function _(e){var t=function(e){return e||""};return{name:t(e.displayName),email:t(e.email),photoUrl:t(e.photoURL),uid:t(e.uid)}}function A(){return T.apply(this,arguments)}function T(){return(T=Object(N.a)(C.a.mark((function e(){var t,n,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login function called"),t=new z.auth.GoogleAuthProvider,e.prev=2,e.next=5,z.auth().setPersistence(z.auth.Auth.Persistence.LOCAL).then((function(){return z.auth().signInWithPopup(t)}));case 5:if(!(n=e.sent).credential){e.next=12;break}return n.credential.accessToken,a=null,(r=n.user)&&(a=_(r)),e.abrupt("return",a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.debug(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function L(){z.auth().signOut()}var P="/CwnSenseAnnot";function D(e){return R.apply(this,arguments)}function R(){return(R=Object(N.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n="\u63d0\u958b\u8dcc".indexOf(t)+1)<0)){e.next=5;break}throw"Lemma unfound";case 5:return e.abrupt("return",fetch(P+"/sample_data/senses0".concat(n,".json")).then((function(e){return e.json()})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return M.apply(this,arguments)}function M(){return(M=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(P+"/sample_data/session.json").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return W.apply(this,arguments)}function W(){return(W=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P+"/sample_data/assignments.json",e.abrupt("return",fetch("/CwnSenseAnnot/sample_data/assignments.json").then((function(e){return e.json()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return H.apply(this,arguments)}function H(){return(H=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P+"/sample_data/annotations.json",e.abrupt("return",fetch("/CwnSenseAnnot/sample_data/annotations.json").then((function(e){return e.json()})).then((function(e){return e.reduce((function(e,t){return e[t.assignId]=t,e}),{})})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return J.apply(this,arguments)}function J(){return(J=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P+"/sample_data/sample_sentences.json",e.abrupt("return",fetch("/CwnSenseAnnot/sample_data/sample_sentences.json").then((function(e){return e.json()})).then((function(e){return t in e?e[t]:[]})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(N.a)(C.a.mark((function e(t,n){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a="\u63d0\u958b\u8dcc".indexOf("\u63d0")+1)<0)){e.next=5;break}throw"Lemma unfound";case 5:return r=P+"/sample_data/senseTree0".concat(a,".json"),e.abrupt("return",fetch(r).then((function(e){return e.json()})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(N.a)(C.a.mark((function e(t,n){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.token,r=[],!a){e.next=13;break}return"\u63d0",e.prev=4,e.next=7,D("\u63d0");case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:n(r);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function K(){return(K=Object(N.a)(C.a.mark((function e(t,n){var a,r,o,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.userEmail,r=t.token,o=null,!a||!r){e.next=14;break}return c=r[0],e.prev=5,e.next=8,U(a,c);case 8:o=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error(e.t0);case 14:n(o);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function Q(){return(Q=Object(N.a)(C.a.mark((function e(t,n,a){var r,o,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={annotator:t.userEmail,timestamp:Date.now(),assignId:t.assignId,itemId:t.itemId,candidates:[],probs:[]},o=t.itemId,(c=t.assignId)&&o&&(i=n[c])&&o in i.results&&(r=i.results[o]),a(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=n(304),$=n(290),q=n(70),ee=n(17),te=n(287),ne=n(3),ae=new X.a({onSelectionChanged:function(){console.log(ae.getSelection())}});function re(e,t){if(e&&t)return r.a.createElement($.a,{tooltipProps:(n=e.examples,{onRenderContent:function(){return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",null,e)})))}}),id:"tp"+e.cwn_id,delay:q.a.zero,directionalHint:ee.a.rightCenter},r.a.createElement(te.a,{imageInitials:e.pos,initialsColor:t%6,text:e.definition,secondaryText:e.examples[0],size:ne.c.size32,presenceTitle:e.examples.join("\n"),showSecondaryText:!0,styles:{root:{marginTop:"7px"},primaryText:{fontSize:"11pt"},secondaryText:{fontSize:"8pt",color:"gray"}}}));var n}function oe(e){return r.a.createElement("div",{style:{maxWidth:"400px",height:"500px",overflowX:"hidden",overflowY:"scroll"}},r.a.createElement(h.a,{items:e.senses,onRenderCell:re}))}n(183);var ce=n(161);function ie(e,t){return r.a.createElement("div",{onClick:function(){!function(e){console.log(e)}(e)}},e.title)}function se(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),o=n[0],c=n[1];if(Object(a.useEffect)((function(){!function(e,t){K.apply(this,arguments)}(e.trial,c)}),[e.trial]),o){var s=o.root.children;return r.a.createElement("div",{style:{width:500,height:500}},r.a.createElement(ce.a,{treeData:s,onChange:function(e){if(e){var t=Object.assign({},o);t.root.children=e,c(t)}else c(null)},rowHeight:50,generateNodeProps:function(e){var t=e.node;e.path;return{title:ie(t)}}}))}return null}function le(e){var t=e.revision,n={height:"30px",width:"30px",fontSize:"100px"};if(t){var a=null;if(t.candidates.length>0){var o=function(e,t){var n=t.map((function(e){return e.cwn_id})).indexOf(e);return n<0?null:t[n]}(t.candidates[0],e.senses);if(o){var c="".concat(o.cwn_id,": ").concat(o.definition);a=r.a.createElement("div",null," \u5df2\u9078\u64c7\uff1a",c," ")}}return r.a.createElement(s.a,{className:"alert alert-primary",horizontal:!0,styles:{root:{width:"100%;"}}},r.a.createElement(s.a.Item,{grow:1},a),r.a.createElement(s.a.Item,null,r.a.createElement(s.a,{tokens:{childrenGap:2},horizontal:!0,horizontalAlign:"end"},r.a.createElement(E.a,{style:n,iconProps:{iconName:"CheckMark"},title:"\u78ba\u8a8d",ariaLabel:"CheckMark"}),r.a.createElement(E.a,{style:n,iconProps:{iconName:"Communications"},title:"\u9700\u8981\u8a0e\u8ad6",ariaLabel:"Communications"}))))}return null}var ue=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(null),u=Object(i.a)(l,2),m=u[0],p=u[1];return Object(a.useEffect)((function(){!function(e,t){Z.apply(this,arguments)}(e.trial,c)}),[e.trial]),Object(a.useEffect)((function(){!function(e,t,n){Q.apply(this,arguments)}(e.trial,e.annotations,p)}),[e.trial,e.annotations]),r.a.createElement(s.a,null,r.a.createElement(s.a.Item,{align:"center"},r.a.createElement(le,{revision:m,senses:o})),r.a.createElement(s.a,{horizontal:!0},r.a.createElement(s.a.Item,{grow:1},r.a.createElement(oe,{senses:o})),r.a.createElement(s.a.Item,{grow:1},r.a.createElement(se,{trial:e.trial}))))};function me(){return(me=Object(N.a)(C.a.mark((function e(t,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=14;break}return e.prev=1,e.next=4,G(t);case 4:a=e.sent,console.debug(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),a=null;case 12:e.next=15;break;case 14:a=null;case 15:n(a);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function pe(){return(pe=Object(N.a)(C.a.mark((function e(t,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null===t){e.next=15;break}return e.prev=2,e.next=5,B(t);case 5:a=e.sent,e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),console.trace(),a=[];case 13:e.next=16;break;case 15:a=[];case 16:n(a);case 17:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function fe(){return(fe=Object(N.a)(C.a.mark((function e(t,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},null===t){e.next=13;break}return e.prev=2,e.next=5,F(t);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:e.next=13;break;case 13:n(a);case 14:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function de(){return(de=Object(N.a)(C.a.mark((function e(t,n){var a,r,o,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},!t){e.next=21;break}return r=t.currentItemId,o=t.currentAssignmentId,c=r.split(":")[0],i=parseInt(r.split(":")[1]),e.prev=6,e.next=9,V(c);case 9:a.sentence=e.sent,a.token=a.sentence[i],a.userEmail=t.userEmail,a.assignId=o,a.itemId=r,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.error(e.t0);case 19:e.next=21;break;case 21:n(a);case 22:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}n(257);var he=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(a.useState)({}),p=Object(i.a)(m,2),f=p[0],d=p[1],h=Object(a.useState)([]),v=Object(i.a)(h,2),b=v[0],g=v[1],E=Object(a.useState)({}),w=Object(i.a)(E,2),x=w[0],y=w[1];Object(a.useEffect)((function(){var e,t;z.initializeApp({apiKey:"AIzaSyCtaBIZ-IiQ0a5Z0LsuEnVGmojJbY9yvMs",authDomain:"langon-281613.firebaseapp.com",databaseURL:"https://langon-281613.firebaseio.com",projectId:"langon-281613",storageBucket:"langon-281613.appspot.com",messagingSenderId:"98385288306",appId:"1:98385288306:web:09cdd581f06c0e3cdb76eb",measurementId:"G-36C7NTBFN0"}),z.analytics(),e=function(e){return o(e)},t=function(){return o(null)},z.auth().onAuthStateChanged((function(n){if(n){var a=_(n);e(a)}else t()}))}),[]),Object(a.useEffect)((function(){!function(e,t){me.apply(this,arguments)}(n,u)}),[n]),Object(a.useEffect)((function(){!function(e,t){pe.apply(this,arguments)}(n,g)}),[n]),Object(a.useEffect)((function(){!function(e,t){fe.apply(this,arguments)}(n,d)}),[n]),Object(a.useEffect)((function(){!function(e,t){de.apply(this,arguments)}(l,y)}),[l,b]);var k=l?l.currentItemId:"";return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(j,{user:n,session:l,assignments:b,annotations:f,login_fn:A,logout_fn:L}),r.a.createElement("div",{className:"col"},r.a.createElement(O,{itemId:k,sentence:x.sentence}),r.a.createElement("form",null,r.a.createElement(ue,{trial:x,annotations:f})))))},ve=n(162);n(255);Object(ve.a)();var be=function(){return r.a.createElement(he,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[174,1,2]]]);
//# sourceMappingURL=main.393f6925.chunk.js.map